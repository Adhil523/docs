---
title: Metadata
---
import { NumscriptBlock } from 'react-numscript-codeblock';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Numscript transactions can interact with metadata, both on transactions and accounts. Metadata can either be read from (to initialize variables) or written to.

## Account metadata

Structured account metadata can be injected in Numscript variables. In the example below, we inject the `coupon_value` metadata from the coupon account:

### Variable initializating with meta

<NumscriptBlock script={`vars {
  account  $coupon
  account  $wallet
  monetary $value = meta($coupon, "coupon_value")
}\n
send $value (
  source = $coupon
  destination = $wallet
)`}></NumscriptBlock>

Metadata injected in variables need to be typed, either as a `monetary`, `account` or `portion`. The type of the metadata is directly read from the value of the key `type` of the object stored under the metadata key, and its value is read from the value of the key `value`.

An example is worth a thousand of repetitions of the words key and value:

<Tabs>

  <TabItem value="monetary" label="Monetary">

  ```json
  {
    "coupon_value": {
      "type": "monetary",
      "value": {
        "amount": 100,
        "asset": "USD"
      }
    }
  }
  ```

  </TabItem>

  <TabItem value="account" label="Account">

  ```json
  {
    "merchant": {
      "type": "account",
      "value": "platform:merchant"
    }
  }
  ```
  </TabItem>

  <TabItem value="portion" label="Portion">

  ```json
  {
    "commission": {
      "type": "portion",
      "value": "15/100"
    }
  }
  ```

  </TabItem>

</Tabs>

<!-- ### Using set_account_meta

Metadata can be written to an account using the `set_account_meta("key", _value_)` statement. The statement takes a string-type key and a value which can be of type `monetary`, `account` or `portion`, either as a variable or a literal. -->

## Transaction metadata

### Using set_tx_meta

Metadata can be written to a transaction using the `set_tx_meta("key", _value_)` statement. The statement takes a string-type key and a value which can be of type `monetary`, `account` or `portion`, either as a variable or a literal.

<NumscriptBlock script={`set_tx_meta("order_fee", [USD/2 100])
set_tx_meta("tax", 20/100)
set_tx_meta("collection_account", @platform:commission)
set_tx_meta("commission", $commission)`}></NumscriptBlock>

## Wrap-up example

<NumscriptBlock script={`vars {
  account $order
  account $merchant = meta($order, "merchant")
  monetary $fee
  portion $commission
}\n
send $fee (
  source = @orders:1234
  destination = @platform:fees
)\n
send [USD/2 *] (
  source = @orders:1234
  destination = {
    $commission to @platform:fees
    remaining to $merchant
  }
)\n
set_tx_meta("order_fee", $fee)
set_tx_meta("tax", 20/100)
set_tx_meta("commission", $commission)\n`}></NumscriptBlock>